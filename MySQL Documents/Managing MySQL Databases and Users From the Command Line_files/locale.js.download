var locale=(function(){var self=this;var language_code;var country_code;self.process_country=function(code){country_code=code;if(a2.cookie.get('offer_localization')==null){self.fetch_banner();}};self.set_whmcs_language=function(){var lang=a2.cookie.get('domain_default_lang');if(!lang){var lang=locale.get_domain_language();a2.cookie.set('domain_default_lang',lang);a2.cookie.whmcs('language',locale.whmcs_language_name(lang));}}
self.process_language=function(code){language_code=code;a2.country(self.process_country);};self.fetch_banner=function(){$.getJSON('/includes/locale/localize/'+document.location.hostname+'/'+language_code+'/'+country_code,self.display_banner);};self.display_banner=function(data){if('target'in data){var query_string=location.search;var query_string=query_string.replace(/currencycode=\w*/gi,'');var query_string=query_string.replace(/\&\&+/g,'&');$('<div id="locale-banner"><div class="container"><p>'
+data.target.banner_text+
'<br><a href="http://'+data.target.domain+window.location.pathname+query_string+(query_string.match(/\?/)?'&':'?')+'currencycode='+a2.cookie.get('currencycode')+'" class="accept btn btn-sm btn-info">'
+data.target.button_text+'</a> <a href="#" class="dismiss btn btn-sm">No thanks</a></p></div></div>').prependTo('#wrapper').hide().slideDown('slow');$('#locale-banner .dismiss').click(function(ev){ev.preventDefault();self.dismiss();});$('#locale-banner .accept').click(function(ev){var domain=data.target.domain;var lang=locale.get_domain_language(domain);a2.cookie.whmcs('language',locale.whmcs_language_name(lang));return true;});}else{self.dismiss();}};self.dismiss=function(){a2.cookie.set('offer_localization','no');$('#locale-banner').remove();};self.run=function(){self.set_whmcs_language();a2.language.get_browser_preference(self.process_language);};self.get_domain_language=function(domain){var domain=domain||document.location.hostname;var domain=domain.split('.');var tld=domain.slice(-1);if(tld=='mx'){return 'es';}else{return 'en';}}
self.whmcs_language_name=function(short_name){if(short_name=='es'){return 'Spanish';}else{return 'English';}}
return self;})();$(document).ready(function(){locale.run();})